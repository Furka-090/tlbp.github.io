<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="tr" xml:lang="tr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="date" content="2015-10-21T16:15:44+03:00" /><link rel="start" href=".." title="W3C Önergeleri" /><link rel="up" href="index.html#index-toc" title="XSL Dönüşümleri (XSLT) Sürüm 1.0" /><link rel="previous" href="expr.html" title="İfadeler" /><link rel="next" href="named-templates.html" title="İsimli Örneklenimler" /><link rel="stylesheet" type="text/css" href="../recs.css" /><style type="text/css">/* Belgeye özel bir CSS yoksa burası boş olabilir. */</style><title>Örneklenim Kuralları</title></head><body><table width="100%" summary="Gezinme Çubuğu" cellpadding="1" cellspacing="0" style="border:1px dotted #999999"><tr><th colspan="3" align="center">XSL Dönüşümleri (XSLT) Sürüm 1.0</th></tr><tr><td width="5%"><a href="expr.html">Önceki</a></td><td width="*" align="center"><a href="index.html#index-toc">Yukarı</a></td><td width="5%" align="right"><a href="named-templates.html">Sonraki</a></td></tr></table><div class="div1"><h2><a name="rules" id="rules"></a>5 Örneklenim Kuralları</h2><b>İçindekiler</b><p class="toc"><div class="tocline">    5.1 <a href="rules.html#idp24003536">İşlem Modeli</a></div><div class="tocline">    5.2 <a href="rules.html#patterns">Örüntüler</a></div><div class="tocline">    5.3 <a href="rules.html#idp24140384">Örneklenim Kurallarının Tanımlanması</a></div><div class="tocline">    5.4 <a href="rules.html#idp24164192">Örneklenim Kurallarının Uygulanması</a></div><div class="tocline">    5.5 <a href="rules.html#conflict">Şablon Kuralları için Uyuşmazlıkların Çözümlenmesi</a></div><div class="tocline">    5.6 <a href="rules.html#apply-imports">Örneklenim Kurallarının Geçerli Kılınması</a></div><div class="tocline">    5.7 <a href="rules.html#modes">Kipler</a></div><div class="tocline">    5.8 <a href="rules.html#built-in-rule">Yerleşik Örneklenim Kuralları</a></div></p><div class="div2"><h3><a name="idp24003536" id="idp24003536"></a>5.1 İşlem Modeli</h3><p>Bir kaynak düğümleri listesi işlendiğinde hedef ağacın bir bölümü oluşturulmuş olur. Hedef ağacı oluşturmak için kök düğümü içeren ana listeyi işlemek gerekir. Bir kaynak düğümleri listesi, ana listenin her üyesi sırayla işlenerek oluşturulan hedef ağaç yapısına eklenerek işlenir. Bir düğüm ise, düğümle eşleşen örüntülere sahip tüm örneklenim kuralları bulunarak ve bunların en uygunu seçilerek işlenir; seçilen kuralın örneklenimi, kaynak düğüm <a title="Geçerli Düğüm tanımı" href="intro.html#dt-current-node">geçerli düğüm</a> olarak, kaynak düğüm listesi <a title="Geçerli Düğüm Listesi tanımı" href="intro.html#dt-current-node-list">geçerli düğüm listesi</a> olarak ele alınarak örneklenir. Bir örneklenim genelde, işlem için ek kaynak düğümü listesini seçmekte kullanılan yönergelerden oluşur. Eşleştirme, örnekleme ve seçim işlemleri işlem için seçilecek kaynak düğümü kalmayıncaya kadar ardışık olarak sürer.</p><p>Gerçeklenimler, kaynak belgeyi, bu işlem modeli kullanılarak elde edilen sonucun aynısını üretecek şekilde işleyecek yöntemi seçmekte özgürdürler.</p></div><div class="div2"><h3><a name="patterns" id="patterns"></a>5.2 Örüntüler</h3><p><a name="dt-pattern" id="dt-pattern" title="Örüntü"></a><span title="Örüntü tanımı" class="termdef">Örneklenim kuralları düğümlerle bir <b>örüntü</b> aracılığıyla özdeşleşir. Örüntüler, örneklenim kurallarından başka, numaralama (<a href="rtree.html#number"><b>Numaralama</b></a>) ve anahtar bildirimi (<a href="add-func.html#key"><b>Anahtarlar</b></a>) için de kullanılırlar. Bir örüntü, bir düğüme uygulanacak koşul kümesini belirtir. Bu koşulları yerine getiren bir düğüm örüntüyle eşleşir; yerine getirmiyorsa eşleşmez. Örüntü sözdizimi, ifade sözdiziminin bir alt kümesidir. Özellikle, belli şartları sağladığı takdirde bir <a href="../xpath#location-paths">konumsal yol</a> örüntü olarak kullanılabilir. Bir ifade ayrıca, daima düğüm kümesi türünde bir nesne olarak değerlendirilen bir örüntüdür. Bir düğüm, bir örüntünün belli bir bağlamla ilgili bir ifade olarak değerlendirilmesinin sonucunda elde edilen düğüm kümesinin bir üyesiyse, düğüm örüntüyle eşleşir; sözkonusu bağlam, <a href="../xpath#axis-ancestor-or-self">bu düğüm veya üstsellerinden birinin</a> eşleştiği bağlamsal düğümlerdir.</span></p><p>Bazı örüntü örnekleri:</p><ul><li><p><code>para</code> örüntüsü herhangi bir <code>para</code> elemanıyla eşleşir</p></li><li><p><code>*</code> örüntüsü herhangi bir elemanla eşleşir</p></li><li><p><code>chapter|appendix</code> örüntüsü herhangi bir <code>chapter</code> veya <code>appendix</code> elemanıyla eşleşir</p></li><li><p><code>olist/item</code> örüntüsü <a href="../xpath#axis-parent">ebeveyni</a> <code> olist</code> olan herhangi bir <code>item</code> elemanıyla eşleşir</p></li><li><p><code>appendix//para</code> örüntüsü <a href="../xpath#axis-ancestor">üstseli</a> <code> appendix</code> olan herhangi bir <code>para</code> elemanıyla ile eşleşir</p></li><li><p><code>/</code> örüntüsü sadece <a href="../xpath#root-node">kök düğümle</a> eşleşir</p></li><li><p><code>text()</code> örüntüsü herhangi bir <a href="../xpath#text-nodes"> metin düğümü</a> ile eşleşir</p></li><li><p><code>processing-instruction()</code> örüntüsü herhangi bir işlem yönergesi ile eşleşir</p></li><li><p><code>node()</code> örüntüsü bir <a href="../xpath#attr-nodes"> öznitelik düğümü</a> veya kök düğüm olmayan herhangi bir düğümle eşleşir</p></li><li><p><code>id("W11")</code> örüntüsü <a href="../xpath#unique-id">eşsiz ID</a>'si <code>W11</code> olan elemanla eşleşir</p></li><li><p><code>para[1]</code> örüntüsü ilk <code>para</code> çocukla eşleşir</p></li><li><p><code>*[position()=1 and self::para]</code> örüntüsü çocuklardan <code>para</code> türündekilerin ilkiyle eşleşir</p></li><li><p><code>para[last()=1]</code> örüntüsü sonuncu <code>para</code> çocukla eşleşir</p></li><li><p><code>items/item[position()&gt;1]</code> örüntüsü ebeveynleri <code>items</code> olan <code>item</code> elemanlarından ilki hariç hepsiyle eşleşir</p></li><li><p><code>item[position() mod 2 = 1]</code> örüntüsü çift numaralı <code>item</code> çocuklarla eşleşir</p></li><li><p><code>div[@class="appendix"]//p</code> örüntüsü <code>appendix</code> değerli bir <code>class</code> özniteliğine sahip <code>div</code> üstseli olan herhangi bir <code>p</code> elemanıyla eşleşir</p></li><li><p><code>@*</code> örüntüsü herhangi bir öznitelikle eşleşir</p></li><li><p><code>@class</code> örüntüsü herhangi bir <code>class</code> özniteliği ile eşleşir</p></li><li><p><code>*[@class]</code> örüntüsü <code>class</code> özniteliğine sahip herhangi bir elemanla eşleşir</p></li><li><p><code>code[starts-with(normalize-space(text()), 'xsl:')]</code> örüntüsü metin düğümünün <a href="../xpath#function-normalize-space">normalleştirilmiş değeri</a> <code> 'xsl:'</code> dizgesi ile başlayan herhangi bir <code>code</code> elemanıyla eşleşir (Ç.N. - Bu örüntü, bu belirtimin XML belgesini XHTML'ye dönüştürmekte <a href="../esyntax.xsl">kullanılan örneklenimlerden birinde</a> kullanılmıştır.)</p></li></ul><p>Bir örüntünün <a href="rules.html#NT-Pattern"><code>Örüntü</code></a> sözdizimi ile eşleşmesi gerekir. Bir <a href="rules.html#NT-Pattern"><code>Örüntü</code></a>, <code>|</code> imleriyle ayrılmış konumsal yol örüntülerinden oluşur.  Bir konumsal yol örüntüsü, <a href="../xpath#steps">konumlarının</a> her birinde <code>child</code> veya <code>attribute</code> dallarının kullanıldığı bir <a href="../xpath#location-paths">konumsal yol</a>dur. <code>descendant-or-self</code> dalının kullanımının gerekli olmadığı yerlerde <code>//</code> veya <code>/</code> işleci kullanılabilir. Konumsal yol örüntüleri ayrıca, bir dizgesel sabit argümana sahip <a href="../xpath#function-id"><b><code>id</code></b></a> veya <a href="add-func.html#function-key"><code class="function">key</code></a> işlev çağrıları ile başlayabilir. Bir örüntüdeki dayanaklarda da bir konumsal yoldaki <a href="../xpath#predicates">dayanaklarda</a> olduğu gibi keyfî ifadeler kullanılabilir.</p><b><i><a name="idp24072752" id="idp24072752"></a>Örüntüler</i></b><table class="scrap" summary="Scrap"><tbody><tr valign="baseline"><td width="5%"><a name="NT-Pattern" id="NT-Pattern"></a><tt>[1]</tt>   </td><td width="5%"><code>Örüntü</code></td><td width="5%">   ::=   </td><td width="*"><code><a href="rules.html#NT-LocationPathPattern"><code>KonumsalYolÖrüntüsü</code></a></code></td></tr><tr valign="baseline"><td width="%5"></td><td width="%5"></td><td width="%5"></td><td width="*"><code>| <a href="rules.html#NT-Pattern"><code>Örüntü</code></a> '|' <a href="rules.html#NT-LocationPathPattern"><code>KonumsalYolÖrüntüsü</code></a></code></td></tr><tr valign="baseline"><td width="5%"><a name="NT-LocationPathPattern" id="NT-LocationPathPattern"></a><tt>[2]</tt>   </td><td width="5%"><code>KonumsalYolÖrüntüsü</code></td><td width="5%">   ::=   </td><td width="*"><code>'/' <a href="rules.html#NT-RelativePathPattern"><code>GöreliYolÖrüntüsü</code></a>?</code></td></tr><tr valign="baseline"><td width="%5"></td><td width="%5"></td><td width="%5"></td><td width="*"><code>| <a href="rules.html#NT-IdKeyPattern"><code>IdKeyÖrüntüsü</code></a> (('/' | '//') <a href="rules.html#NT-RelativePathPattern"><code>GöreliYolÖrüntüsü</code></a>)?</code></td></tr><tr valign="baseline"><td width="%5"></td><td width="%5"></td><td width="%5"></td><td width="*"><code>| '//'? <a href="rules.html#NT-RelativePathPattern"><code>GöreliYolÖrüntüsü</code></a></code></td></tr><tr valign="baseline"><td width="5%"><a name="NT-IdKeyPattern" id="NT-IdKeyPattern"></a><tt>[3]</tt>   </td><td width="5%"><code>IdKeyÖrüntüsü</code></td><td width="5%">   ::=   </td><td width="*"><code>'id' '(' <code><a href="../xpath#NT-Literal">DizgeselSabit</a></code> ')'</code></td></tr><tr valign="baseline"><td width="%5"></td><td width="%5"></td><td width="%5"></td><td width="*"><code>| 'key' '(' <code><a href="../xpath#NT-Literal">DizgeselSabit</a></code> ',' <code><a href="../xpath#NT-Literal">DizgeselSabit</a></code> ')'</code></td></tr><tr valign="baseline"><td width="5%"><a name="NT-RelativePathPattern" id="NT-RelativePathPattern"></a><tt>[4]</tt>   </td><td width="5%"><code>GöreliYolÖrüntüsü</code></td><td width="5%">   ::=   </td><td width="*"><code><a href="rules.html#NT-StepPattern"><code>KonumÖrüntüsü</code></a></code></td></tr><tr valign="baseline"><td width="%5"></td><td width="%5"></td><td width="%5"></td><td width="*"><code>| <a href="rules.html#NT-RelativePathPattern"><code>GöreliYolÖrüntüsü</code></a> '/' <a href="rules.html#NT-StepPattern"><code>KonumÖrüntüsü</code></a></code></td></tr><tr valign="baseline"><td width="%5"></td><td width="%5"></td><td width="%5"></td><td width="*"><code>| <a href="rules.html#NT-RelativePathPattern"><code>GöreliYolÖrüntüsü</code></a> '//' <a href="rules.html#NT-StepPattern"><code>KonumÖrüntüsü</code></a></code></td></tr><tr valign="baseline"><td width="5%"><a name="NT-StepPattern" id="NT-StepPattern"></a><tt>[5]</tt>   </td><td width="5%"><code>KonumÖrüntüsü</code></td><td width="5%">   ::=   </td><td width="*"><code>
  <a href="rules.html#NT-ChildOrAttributeAxisSpecifier"><code>ÇocukVeyaÖznitelikBelirteci</code></a>
  <code><a href="../xpath#NT-NodeTest">DüğümSınaması</a></code>
  <code><a href="../xpath#NT-Predicate">Dayanak</a></code>*</code></td></tr><tr valign="baseline"><td width="5%"><a name="NT-ChildOrAttributeAxisSpecifier" id="NT-ChildOrAttributeAxisSpecifier"></a><tt>[6]</tt>   </td><td width="5%"><code>ÇocukVeyaÖznitelikBelirteci</code></td><td width="5%">   ::=   </td><td width="*"><code><code><a href="../xpath#NT-AbbreviatedAxisSpecifier">KısaKonumBelirteci</a></code></code></td></tr><tr valign="baseline"><td width="%5"></td><td width="%5"></td><td width="%5"></td><td width="*"><code>| ('child' | 'attribute') '::'</code></td></tr></tbody></table><p>Bir örüntünün bir düğümle eşleşmesi için gerek ve yeter koşul, örüntünün bir ifade olarak değerlendirildiği olası bir bağlamda, düğümün bu değerlendirme sonucunda elde edilen düğüm kümesinin bir üyesi olmasıdır. Bir düğüm eşleştiği takdirde, olası bağlamlar, bu düğümün veya bir üstselinin eşleştiği bir bağlamsal düğüme ve bu bağlamsal düğümü içeren bir bağlamsal düğüm listesine sahip bağlamlar olur.</p><p>Örneğin, <code>p</code> örüntüsü herhangi bir <code>p</code> elemanı ile eşleşir; <code>p</code> ifadesi, bağlamsal düğüm olarak <code>p</code>'nin ebeveyni ile değerlendirilirse, elde edilen düğüm kümesi <code>p</code> elemanını üyesi olarak içerecektir.</p><dl class="note"><dt class="prefix"><b>Not:</b></dt><dd>Bu örüntü, <code>p</code> elemanı belge elemanı olsa bile elemanla eşleşir, çünkü belge elemanının ebeveyni kök düğümdür.<p></p></dd></dl><p>Örüntülerin anlambilgisi dolaylı olarak ifade değerlendirme kuralları ile belirtiliyor olsa da, bir örüntünün ne anlam geldiğini ifade değerlendirme kurallarıyla düşünmeksizin doğrudan doğruya anlamak daha kolaydır. Bir örüntüde <code>|</code> imi seçenekleri belirtir; eğer bir örüntüde bir veya daha fazla sayıda <code>|</code> imi ile ayrılmış seçenek varsa, seçeneklerden birinin eşleşmesi halinde örüntü eşleşmiş olur.</p><p><code>/</code> veya <code>//</code> ayraçları ile ayrılmış çok sayıda <a href="rules.html#NT-StepPattern"><code>KonumÖrüntüsü</code></a>den oluşmuş bir örüntü sağdan sola doğru eşleşir. Örüntünün eşleşmesi için en sağdaki <a href="rules.html#NT-StepPattern"><code>KonumÖrüntüsü</code></a>nün düğümle eşleşip örüntünün kalanının da uygun bir elemanla eşleşmesi yeterlidir; uygun eleman, ayraç olarak <code>//</code> kullanılmışsa düğümün üstsellerden biri, <code>/</code> kullanılmışsa düğümün ebeveyni olacaktır.</p><p>Çocuk dal kullanan bir <a href="rules.html#NT-StepPattern"><code>KonumÖrüntüsü</code></a>, eğer <code><a href="../xpath#NT-NodeTest">DüğümSınaması</a></code>nın sonucu düğüm için doğruysa ve düğüm bir öznitelik düğümü ise eşleşir.</p><p>İfade <code>[]</code> içerdiği takdirde, <a href="rules.html#NT-StepPattern"><code>KonumÖrüntüsü</code></a>ndeki ilk <code><a href="../xpath#NT-PredicateExpr">Dayanakİfadesi</a></code> bağlamsal düğüm olarak düğümle ve eşleştirilecek düğüm bir öznitelik düğümü olmadıkça, <code><a href="../xpath#NT-NodeTest">DüğümSınaması</a></code> bağlamsal düğüm listesi olarak bağlamsal düğümün kardeşleri ile eşleşecek şekilde değerlendirilir; eşleştirilecek düğüm bir öznitelik düğümü olduğu takdirde, bağlamsal düğüm listesi, tamamen, eşleşen öznitelikle aynı düğümde olan özniteliklerden oluşur ve bu <code><a href="../xpath#NT-NameTest">AdSınaması</a></code> ile eşleşir.</p><p>Örneğin, bu ifadenin,</p><div class="example"><pre>appendix//ulist/item[position()=1]</pre></div><p>bir düğümle eşleşmesi için gerek ve yeter koşullar şunlardır:</p><ul><li><p><code>item</code> <code><a href="../xpath#NT-NodeTest"> DüğümSınaması</a></code> düğüm için doğru olmalı ve düğüm bir öznitelik olmamalıdır; başka bir deyişle düğüm bir <code>item</code> elemanı olmalıdır.</p></li><li><p><code>position()=1 </code><code><a href="../xpath#NT-PredicateExpr"> Dayanakİfadesi</a></code>nin bağlamsal düğüm olarak düğümle ve bağlamsal düğüm listesi olarak düğümün <code>item</code> kardeşleriyle değerlendirilmesinin  sonucu doğru olmalıdır.</p></li><li><p>düğümün <code>appendix//ulist</code> ile eşleşen bir ebeveyni olmalıdır; ebeveyn, <code>appendix</code> üstsele sahip bir <code>ulist</code> elemanı ise bu doğru olacaktır.</p></li></ul><p></p></div><div class="div2"><h3><a name="idp24140384" id="idp24140384"></a>5.3 Örneklenim Kurallarının Tanımlanması</h3><a id="element-template" name="element-template"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto">&lt;!-- Grubu: tepe-seviyeden-eleman --&gt;
<span class="element">&lt;xsl:template</span>
  <code>match</code> = <var>örüntü</var>
  <code>name</code> = <var>nitelikli-ad</var>
  <code>priority</code> = <var>sayı</var>
  <code>mode</code> = <var>nitelikli-ad</var><span class="element"> &gt;</span>
  &lt;!-- İçeriği: (<a href="variables.html#element-param">&lt;xsl:param&gt;</a>*, <var>örneklenim</var>) --&gt;
<span class="element">&lt;/xsl:template&gt;
</span></pre></td><td align="right" valign="top" style="font-variant: small-caps;">eleman</td></tr></table><p>Bir örneklenim kuralı <a href="rules.html#element-template"><span class="elemref"><tt>xsl:template</tt></span></a> elemanı ile belirtilir. <code>match</code> özniteliği, kuralın uygulanacağı kaynak düğüm ya da düğümleri tanımlayan bir <a href="rules.html#NT-Pattern"><code>Örüntü</code></a>dür. <code>match</code> özniteliği <a href="rules.html#element-template"><span class="elemref"><tt>xsl:template</tt></span></a> elemanı bir <code>name</code> özniteliğine sahip olmadıkça gereklidir (<a href="named-templates.html"><b>İsimli Örneklenimler</b></a> bölümüne bakınız). <code>match</code> özniteliğinin değer olarak bir <code><a href="../xpath#NT-VariableReference">DeğişkenGönderimi</a></code> içermesi bir hatadır. <a href="rules.html#element-template"><span class="elemref"><tt>xsl:template</tt></span></a> elemanının içeriği, örneklenim kuralı uygulandığında nesnelleşmiş olacak olan örneklenimdir.</p><p>Örneğin bir XML belge şunu içersin:</p><div class="example"><pre>Bu &lt;emph&gt;önemli&lt;/emph&gt; bir noktadır.</pre></div><p>Aşağıdaki örneklenim kuralı <code>emph</code> elemanı ile eşleşir ve <code>font-weight</code> özniteliğinin değeri <code>bold</code> olan bir <code>fo:inline-sequence</code> biçimleme nesnesini üretir.</p><div class="example"><pre>&lt;xsl:template match="emph"&gt;
  &lt;fo:inline-sequence font-weight="bold"&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/fo:inline-sequence&gt;
&lt;/xsl:template&gt;
</pre></div><p></p><dl class="note"><dt class="prefix"><b>Not:</b></dt><dd>Bu belgedeki örneklerde, [<a href="bibref.html#XSL">XSL</a>]'de tanımlanmış olan biçimleme nesnelerinin isim-alanı olan <code>http://www.w3.org/1999/XSL/Format</code> için <code>fo:</code> öneki kullanılmıştır.<p></p></dd></dl><p>Biraz sonra açıklanacağı gibi <a href="rules.html#element-apply-templates"><span class="elemref"><tt>xsl:apply-templates</tt></span></a> elemanı kaynak elemanın çocuklarını peşpeşe işleyecektir.</p></div><div class="div2"><h3><a name="idp24164192" id="idp24164192"></a>5.4 Örneklenim Kurallarının Uygulanması</h3><a id="element-apply-templates" name="element-apply-templates"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto">&lt;!-- Grubu: yönerge --&gt;
<span class="element">&lt;xsl:apply-templates</span>
  <code>select</code> = <var>düğüm-kümesi-ifadesi</var>
  <code>mode</code> = <var>nitelikli-ad</var><span class="element"> &gt;</span>
  &lt;!-- İçeriği: (<a href="sorting.html#element-sort">&lt;xsl:sort&gt;</a> | <a href="variables.html#element-with-param">&lt;xsl:with-param&gt;</a>) --&gt;
<span class="element">&lt;/xsl:apply-templates&gt;
</span></pre></td><td align="right" valign="top" style="font-variant: small-caps;">eleman</td></tr></table><p>Bu örnek bir <code>chapter</code> elemanı için bir blok oluşturup ardından çocukları işler.</p><div class="example"><pre>&lt;xsl:template match="chapter"&gt;
  &lt;fo:block&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/fo:block&gt;
&lt;/xsl:template&gt;</pre></div><p><code>select</code> özniteliğinin yokluğunda <a href="rules.html#element-apply-templates"><span class="elemref"><tt>xsl:apply-templates</tt></span></a> yönergesi geçerli düğümün tüm çocuklarını, metin düğümleri de dahil olmak üzere işler. Bununla birlikte, <a href="data-model.html#strip"><b>Boşluk Ayıklama</b></a> bölümünde belirtildiği gibi ayıklanan metin düğümleri işlenmeyecektir. Eğer bir eleman için boşluk düğümlerinin ayıklanması etkin kılınmamışsa, eleman içeriğindeki bütün boşluk karakterleri metin olarak işlenecektir ve bu bakımdan <a href="../xpath#function-position"><b><code>position</code></b></a> işlevi tarafından döndürülen bir çocuk elemanın yakınlık derecesi saptanırken, çocuk elemanların arasındaki boşluklar da sayılacaktır.</p><p><code>select</code> özniteliğinde belirtilecek bir ifadeyle, tüm çocukların değil de sadece seçilen çocukların işlenmesi sağlanabilir. <code>select</code> özniteliğinin değeri bir <a title="İfade tanımı" href="expr.html#dt-expression">ifade</a>dir. İfade bir düğüm kümesiyle sonuçlanacak şekilde değerlendirilmelidir. Seçilen düğüm kümesi, bir sıralama (<a href="sorting.html"><b>Sıralama</b></a>) belirtilmemişse  belgedeki sıraya göre işlenecektir. Aşağıdaki örnekte, <code>yazar-grubu</code>'nun tüm <code>yazar</code> çocukları işlenmektedir:</p><div class="example"><pre>&lt;xsl:template match="yazar-grubu"&gt;
  &lt;fo:inline-sequence&gt;
    &lt;xsl:apply-templates select="yazar"/&gt;
  &lt;/fo:inline-sequence&gt;
&lt;/xsl:template&gt;</pre></div><p>Aşağıdaki örnekte ise, <code>yazar-grubu</code>'nun <code>yazar</code> çocuklarının tüm <code>verilen-ad</code>'ları işlenmektedir:</p><div class="example"><pre>&lt;xsl:template match="yazar-grubu"&gt;
  &lt;fo:inline-sequence&gt;
    &lt;xsl:apply-templates select="yazar/verilen-ad"/&gt;
  &lt;/fo:inline-sequence&gt;
&lt;/xsl:template&gt;</pre></div><p>Bu örnekte, <code>book</code>  elemanının tüm <code>heading</code> astsalları işlenir:</p><div class="example"><pre>&lt;xsl:template match="book"&gt;
  &lt;fo:block&gt;
    &lt;xsl:apply-templates select=".//heading"/&gt;
  &lt;/fo:block&gt;
&lt;/xsl:template&gt;</pre></div><p>Ayrıca, geçerli düğümün astsalı olmayan elemanları da işlemek mümkündür. Bu örnekte <code>ekip</code> çocuklara ve <code>personel</code> torunlara sahip bir <code>bölüm</code> ele alınmaktadır. Bir personelin bölümü bulunmakta ve <code>bölüm</code>'ün <code>ekip</code> çocukları işleme sokulmaktadır:</p><div class="example"><pre>&lt;xsl:template match="personel"&gt;
  &lt;fo:block&gt;
    &lt;xsl:apply-templates select="name"/&gt; ismindeki çalışanımız
    &lt;xsl:apply-templates select="ancestor::bölüm/ekip"/&gt; ekibindedir.
  &lt;/fo:block&gt;
&lt;/xsl:template&gt;</pre></div><p>Basit bir baştan sıralama yapmak için tek bir örüntünün içinde çok sayıda <a href="rules.html#element-apply-templates"><span class="elemref"><tt>xsl:apply-templates</tt></span></a> elemanı kullanılabilir. Aşağıdaki örnekte iki HTML tablosu oluşturulmaktadır. İlk tablo yurtiçi satışlarla, ikinci tablo yurtdışı satışlarla doldurulmaktadır.</p><div class="example"><pre>&lt;xsl:template match="ürün"&gt;
  &lt;table&gt;
    &lt;xsl:apply-templates select="satışlar/yurtiçi"/&gt;
  &lt;/table&gt;
  &lt;table&gt;
    &lt;xsl:apply-templates select="satışlar/yurtdışı"/&gt;
  &lt;/table&gt;
&lt;/xsl:template&gt;</pre></div><p></p><dl class="note"><dt class="prefix"><b>Not:</b></dt><dd>Biri diğerinin astsalı olan iki astsalla eşleşim mümkündür. Bu özel bir durum olarak ele alınmaz: her iki astsal normal olarak işlenir. Şöyle bir kaynak belgemiz olsun:<p></p><div class="example"><pre>&lt;doc&gt;&lt;div&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/doc&gt;</pre></div><p>Bu kuralla,</p><div class="example"><pre>&lt;xsl:template match="doc"&gt;
  &lt;xsl:apply-templates select=".//div"/&gt;
&lt;/xsl:template&gt;</pre></div><p>hem dış <code>div</code> hem de iç <code>div</code> işlenecektir.</p></dd></dl><p></p><dl class="note"><dt class="prefix"><b>Not:</b></dt><dd>Genellikle, <a href="rules.html#element-apply-templates"><span class="elemref"><tt>xsl:apply-templates</tt></span></a> sadece geçerli düğümün astsal düğümlerini işlemekte kullanılır. <a href="rules.html#element-apply-templates"><span class="elemref"><tt>xsl:apply-templates</tt></span></a>'in böyle kullanımı bitmeyen işlem döngüleriyle sonuçlanamaz. Bununla birlikte, <a href="rules.html#element-apply-templates"><span class="elemref"><tt>xsl:apply-templates</tt></span></a> geçerli düğümün astsalları olmayan elemanları işlemek için kullanıldığında bitmeyen döngülere yol açılması olasıdır. Örnek:<p></p><pre class="error">&lt;xsl:template match="foo"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;</pre><p>Gerçeklenimler böyle döngüleri bazı durumlarda saptayabilir, fakat bir biçembentin bir gerçeklenimin saptayamadığı bitmeyen döngülere girme olasılığı mevcuttur. Bu bir hizmet reddi şeklinde bir güvenlik açığını yol açabilir.</p></dd></dl><p></p></div><div class="div2"><h3><a name="conflict" id="conflict"></a>5.5 Şablon Kuralları için Uyuşmazlıkların Çözümlenmesi</h3><p>Bir kaynak düğümün birden fazla örneklenim kuralı ile eşleşmesi olasıdır.Kullanılacak örneklenim kuralı şöyle belirlenir:</p><ol class="enumar"><li><p>Önce tüm eşleşen kurallardan düşük <a title="İthal Önceliği tanımı" href="struct.html#dt-import-precedence">ithal önceliği</a>ne sahip olanlar elenir.</p></li><li><p>Sonra, kalan eşleşen kurallardan düşük işlem önceliğine sahip olanlar elenir. Bir örneklenim kuralının işlem önceliği o örneklenim kuralı üzerinde <code>priority</code> özniteliği ile belirtilir. Değeri bir gerçel sayı (pozitif veya negatif) olmalı ve isteğe bağlı bir eksi imi (<code>-</code>) ile öncelenmiş olarak <code><a href="../xpath#NT-Number">Sayı</a></code> sözdizimi ile eşleşmelidir. <a name="dt-default-priority" id="dt-default-priority" title="Öntanımlı İşlem Önceliği"></a><span title="Öntanımlı İşlem Önceliği tanımı" class="termdef"><b>Öntanımlı işlem önceliği</b> şöyle hesaplanır:</span></p><ul><li><p>Eğer bir örüntü <code>|</code> imleri le birbirlerinden ayrılmış çok sayıda seçenek içeriyorsa, bunların her birinin işlem önceliği bir diğerine denk ele alınır.</p></li><li><p>Eğer bir örüntü önüne bir <a href="rules.html#NT-ChildOrAttributeAxisSpecifier"><code>ÇocukVeyaÖznitelikBelirteci</code></a> getirilmiş bir <code><a href="../xml-names#NT-QName">NitelAd</a></code> ya da önüne bir <a href="rules.html#NT-ChildOrAttributeAxisSpecifier"><code>ÇocukVeyaÖznitelikBelirteci</code></a> getirilmiş <code>processing-instruction(</code><code><a href="../xpath#NT-Literal">DizgeselSabit</a></code><code>)</code> biçiminde ise işlem önceliği 0'dır.</p></li><li><p>Eğer bir örüntü önüne bir <a href="rules.html#NT-ChildOrAttributeAxisSpecifier"><code>ÇocukVeyaÖznitelikBelirteci</code></a> getirilmiş bir <code><a href="../xml-names#NT-NCName">KısaAd</a></code><code>:*</code> biçiminde ise işlem önceliği -0.25'tir.</p></li><li><p>Aksi takdirde, eğer bir örüntü önüne bir <a href="rules.html#NT-ChildOrAttributeAxisSpecifier"><code>ÇocukVeyaÖznitelikBelirteci</code></a> getirilmiş bir <code><a href="../xpath#NT-NodeTest">DüğümSınaması</a></code> biçimindeyse işlem önceliği -0.5'tir.</p></li><li><p>Aksi takdirde, işlem önceliği 0.5'tir.</p></li></ul><p>Bu bakımdan, en bilinen örüntü çeşidinin (bir düğümü belli bir tür veya  genişletilmiş isimle sınayan) işlem önceliği 0'dır. Sonraki en özel örüntü çeşidinin (bir düğümü belli bir isim-alanındaki belli bir tür veya genişletilmiş isimle sınayan) işlem önceliği -0.25'tir. Bundan daha az özel (düğümleri sadece belli bir türle sınayan) örüntülerin işlem önceliği -0.5'tir. En bilinen örüntü çeşidinden daha özel örüntülerin işlem önceliği ise 0.5'tir.</p></li></ol><p>Eğer bu elemeden geriye birden fazla eşleşmiş örneklenim kuralı kalıyorsa bu bir hatadır. Bir XSLT işlemci hatayı raporlayabilir; eğer raporlamıyorsa, kalanlardan biçembentte daha sonlarda yer alan örneklenim kuralını seçerek hatadan kurtulmalıdır.</p></div><div class="div2"><h3><a name="apply-imports" id="apply-imports"></a>5.6 Örneklenim Kurallarının Geçerli Kılınması</h3><a id="element-apply-imports" name="element-apply-imports"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto">&lt;!-- Grubu: yönerge --&gt;
<span class="element">&lt;xsl:apply-imports /&gt;</span>
</pre></td><td align="right" valign="top" style="font-variant: small-caps;">eleman</td></tr></table><p>İthal edilmiş bir biçembentteki bir örneklenim kuralını geçersiz kılmak için kullanılmış bir örneklenim kuralı (bkz, <a href="rules.html#conflict"><b>Şablon Kuralları için Uyuşmazlıkların Çözümlenmesi</b></a>) geçersiz kılınan örneklenim kuralını <a href="rules.html#element-apply-imports"><span class="elemref"><tt>xsl:apply-imports</tt></span></a> elemanını kullanarak çağırabilir.</p><p><a name="dt-current-template-rule" id="dt-current-template-rule" title="Geçerli Örneklenim Kuralı"></a><span title="Geçerli Örneklenim Kuralı tanımı" class="termdef">Bir biçembentin işlenmesi sırasında, herhangi bir anda tek bir <b>geçerli örneklenim kuralı</b> vardır. Bir örneklenim kuralı örüntü eşleştirerek her seçilişinde, kuralın örnekleniminin nesnelleştirilmesi için geçerli örneklenim kuralı haline gelir. Bir <a href="for-each.html#element-for-each"><span class="elemref"><tt>xsl:for-each</tt></span></a> elemanı işleme sokulduğunda geçerli örneklenim kuralı <a href="for-each.html#element-for-each"><span class="elemref"><tt>xsl:for-each</tt></span></a> elemanının içeriğinin nesnelleştirilmesi için tanımsız hale gelir.</span></p><p><a href="rules.html#element-apply-imports"><span class="elemref"><tt>xsl:apply-imports</tt></span></a> elemanı sadece, geçerli örneklenim kuralını içeren biçembente ithal edilmiş olan örneklenim kuralının kullanılarak geçerli düğümün işlenmesini sağlar; düğüm geçerli örneklenim kuralının kipinde işlenir. Geçerli örneklenim kuralı tanımsızken <a href="rules.html#element-apply-imports"><span class="elemref"><tt>xsl:apply-imports</tt></span></a> nesnelleştirme için kullanılmaya çalışılırsa bu bir hatadır.</p><p>Örneğin, <code>doc.xsl</code> biçembenti <code>example</code> elemanları için şöyle bir örneklenim kuralı içeriyor olsun:</p><div class="example"><pre>&lt;xsl:template match="example"&gt;
  &lt;pre&gt;&lt;xsl:apply-templates/&gt;&lt;/pre&gt;
&lt;/xsl:template&gt;</pre></div><p>Başka bir biçembent de <code>doc.xsl</code>'i ithal edip <code>example</code> elemanını şöyle ele alıyor olsun:</p><div class="example"><pre>&lt;xsl:import href="doc.xsl"/&gt;

&lt;xsl:template match="example"&gt;
  &lt;div style="border: solid red"&gt;
     &lt;xsl:apply-imports/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;</pre></div><p>Dönüşümün birleşik etkisi bir <code>example</code> elemanını şu biçime getirir:</p><div class="example"><pre>&lt;div style="border: solid red"&gt;&lt;pre&gt;...&lt;/pre&gt;&lt;/div&gt;</pre></div><p></p></div><div class="div2"><h3><a name="modes" id="modes"></a>5.7 Kipler</h3><p>Kipler bir elemanın her seferinde farklı bir sonuç üretmek üzere defalarca işlenmesini mümkün kılar.</p><p><a href="rules.html#element-template"><span class="elemref"><tt>xsl:template</tt></span></a> ve <a href="rules.html#element-apply-templates"><span class="elemref"><tt>xsl:apply-templates</tt></span></a> elemanlarının ikisi de isteğe bağlı bir <code>mode</code> özniteliğine sahiptir. <code>mode</code> özniteliğinin değeri bir <code><a href="../xml-names#NT-QName">NitelAd</a></code> olup <a href="struct.html#qname"><b>Nitelikli Adlar</b></a> bölümünde açıklandığı gibi yorumlanır. Eğer bir <a href="rules.html#element-template"><span class="elemref"><tt>xsl:template</tt></span></a> elemanı bir <code>match</code> özniteliğine sahip değilse bir <code>mode</code> özniteliğine sahip olmamalıdır. Eğer bir <a href="rules.html#element-apply-templates"><span class="elemref"><tt>xsl:apply-templates</tt></span></a> elemanı bir <code>mode</code> özniteliğine sahipse sadece kendi <code>mode</code> özniteliğinin değeriyle aynı <code>mode</code> özniteliğine sahip <a href="rules.html#element-template"><span class="elemref"><tt>xsl:template</tt></span></a> elemanlarındaki örneklenim kuralları uygulanır; eğer bir <a href="rules.html#element-apply-templates"><span class="elemref"><tt>xsl:apply-templates</tt></span></a> elemanı bir <code>mode</code> özniteliğine sahip değilse sadece <code>mode</code> özniteliğine sahip olmayan <a href="rules.html#element-template"><span class="elemref"><tt>xsl:template</tt></span></a> elemanlarındaki örneklenim kuralları uygulanır.</p></div><div class="div2"><h3><a name="built-in-rule" id="built-in-rule"></a>5.8 Yerleşik Örneklenim Kuralları</h3><p>Biçembentte örtük bir örneklenim kuralıyla eşleşen başarılı bir örüntünün yokluğunda işlemlerin ardışık olarak sürmesini sağlayan bir yerleşik örneklenim kuralı vardır. Bu örneklenim kuralı hem eleman düğümlerine hem de kök düğüme uygulanır. Yerleşik örneklenim kuralının eşdeğeri şöyle birşey olurdu:</p><div class="example"><pre>&lt;xsl:template match="*|/"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;</pre></div><p>Ayrıca, her kip için de benzer şekilde, biçembentte örtük bir örneklenim kuralıyla eşleşen başarılı bir örüntünün yokluğunda işlemlerin ardışık olarak sürmesini sağlayan bir yerleşik örneklenim kuralı vardır. Bu örneklenim kuralı hem eleman düğümlerine hem de kök düğüme uygulanır. Örneğin, <var>m</var> kipi için yerleşik örneklenim kuralının eşdeğeri şöyle birşey olurdu:</p><div class="example"><pre>&lt;xsl:template match="*|/" mode="<var>m</var>"&gt;
  &lt;xsl:apply-templates mode="<var>m</var>"/&gt;
&lt;/xsl:template&gt;</pre></div><p>Ayrıca, metin ve öznitelik düğümleri için metinlerin kopyalanmasını sağlayan bir yerleşik örneklenim kuralı vardır:</p><div class="example"><pre>&lt;xsl:template match="text()|@*"&gt;
  &lt;xsl:value-of select="."/&gt;
&lt;/xsl:template&gt;</pre></div><p>İşlem yönergeleri ve açıklamalar için olan yerleşik örneklenim kuralı hiçbir şey yapmaz:</p><div class="example"><pre>&lt;xsl:template match="processing-instruction()|comment()"/&gt;</pre></div><p>İsim-alanı düğümleri için olan yerleşik örneklenim kuralı da hiçbir şey yapmaz. Bir isim-alanı düğümüyle eşleşen bir örüntü olmayacağı için isim-alanı düğümlerine uygulanan yegane örneklenim kuralı bu yerleşik örneklenim kuralıdır.</p><p>Yerleşik örneklenim kuralları biçembentten önce örtük olarak ithal edilmişler gibi ele alınırlar, dolayısıyla tüm diğer örneklenim kurallarından daha düşük <a title="İthal Önceliği tanımı" href="struct.html#dt-import-precedence">ithal önceliği</a>ne sahip olurlar. Bu bakımdan biçembent yazarları bir yerleşik örneklenim kuralını biçimbente açıkça bir örneklenim kuralı ekleyerek geçersiz kılabilirler.</p></div></div><p></p><table width="100%" summary="Gezinme Çubuğu" cellpadding="1" cellspacing="0" style="border:1px dotted #999999"><tr><td width="30%"><a href="expr.html">Önceki</a></td><td width="*" align="center"><a href="index.html#index-toc">Yukarı</a></td><td width="30%" align="right"><a href="named-templates.html">Sonraki</a></td></tr><tr><td width="30%">İfadeler</td><td width="*" align="center">Bir <a href="http://belgeler.org.tr">Linux Kitaplığı</a> Sayfası</td><td width="30%" align="right">İsimli Örneklenimler</td></tr></table></body></html>
