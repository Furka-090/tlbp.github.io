<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="tr" xml:lang="tr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="date" content="2015-10-21T16:15:44+03:00" /><link rel="start" href=".." title="W3C Önergeleri" /><link rel="up" href="index.html#index-toc" title="XSL Dönüşümleri (XSLT) Sürüm 1.0" /><link rel="previous" href="variables.html" title="Değişkenler ve Değergeçler" /><link rel="next" href="message.html" title="İletiler" /><link rel="stylesheet" type="text/css" href="../recs.css" /><style type="text/css">/* Belgeye özel bir CSS yoksa burası boş olabilir. */</style><title>Ek İşlevler</title></head><body><table width="100%" summary="Gezinme Çubuğu" cellpadding="1" cellspacing="0" style="border:1px dotted #999999"><tr><th colspan="3" align="center">XSL Dönüşümleri (XSLT) Sürüm 1.0</th></tr><tr><td width="5%"><a href="variables.html">Önceki</a></td><td width="*" align="center"><a href="index.html#index-toc">Yukarı</a></td><td width="5%" align="right"><a href="message.html">Sonraki</a></td></tr></table><div class="div1"><h2><a name="add-func" id="add-func"></a>12 Ek İşlevler</h2><b>İçindekiler</b><p class="toc"><div class="tocline">    12.1 <a href="add-func.html#document">Çok Kaynaklı Belgeler</a></div><div class="tocline">    12.2 <a href="add-func.html#key">Anahtarlar</a></div><div class="tocline">    12.3 <a href="add-func.html#format-number">Sayı Biçimleme</a></div><div class="tocline">    12.4 <a href="add-func.html#misc-func">Çeşitli Ek İşlevler</a></div></p><p>Bu bölümde temel XPath işlev kütüphanesine ek olarak XSLT'ye özgü  işlevlere yer verilmiştir. Bu ek işlevlerin bazıları ayrıca, biçembentte <a title="Tepe-seviyeden eleman tanımı" href="struct.html#dt-top-level">tepe-seviyeden</a> elemanlar tarafından belirtilen bilgileri de kullanıma sokarlar; bu bölümde bu işlevler ayrıca açıklanacaktır.</p><div class="div2"><h3><a name="document" id="document"></a>12.1 Çok Kaynaklı Belgeler</h3><a name="function-document" id="function-document"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto"><em>düğüm-kümesi</em> <b>document</b>(<var>nesne</var>, <var>düğüm-kümesi</var>?)</pre></td><td align="right" valign="top" style="font-variant: small-caps;">İşlev</td></tr></table><p><a href="add-func.html#function-document"><code class="function">document</code></a> işlevi asıl kaynak belgeden başka XML belgelere de erişimi mümkün kılar.</p><p><a href="add-func.html#function-document"><code class="function">document</code></a> işlevi tek bir argümana sahipse ve bu argüman da bir düğüm kümesi ise, sonuç, belirtilen düğüm kümesinin her düğümü için, düğümün kendi <a href="../xpath#dt-string-value">dizgesel değeri</a>nin <a href="add-func.html#function-document"><code class="function">document</code></a> işlevinin ilk argümanı, düğümün üyesi olduğu düğüm kümesinin ikinci argümanı olduğu <a href="add-func.html#function-document"><code class="function">document</code></a> çağrılarının sonuçlarının birleşimidir.</p><p><a href="add-func.html#function-document"><code class="function">document</code></a> işlevi iki argümana sahipse ve ilk argüman bir düğüm kümesi ise, sonuç, belirtilen düğüm kümesinin her düğümü için, düğümün <a href="../xpath#dt-string-value">dizgesel değeri</a>nin <a href="add-func.html#function-document"><code class="function">document</code></a> işlevinin ilk argümanı, ikinci argümanın yine ikinci argümanı olduğu <a href="add-func.html#function-document"><code class="function">document</code></a> çağrılarının sonuçlarının birleşimidir.</p><p><a href="add-func.html#function-document"><code class="function">document</code></a> işlevine aktarılan ilk argümanın bir düğüm kümesi olmaması halinde, ilk argüman <a href="../xpath#function-string"><b><code>string</code></b></a> işlevinin yaptığı gibi bir dizgeye dönüştürülür ve bu dizge bir tanım-yeri (URI) başvurusu olarak ele alınır; Bu tanım-yeri ile tanımlanan özkaynak alınıp getirilir. Bu algetir işleminin sonucu olan veri bir XML belge olarak çözümlenir ve veri modeline uygun ber ağaç oluşturulur (bkz, <a href="data-model.html"><b>Veri Modeli</b></a>). Özkaynağın alınıp getirilmesi ile ilgili bir hata oluşmuşsa, XSLT işlemci hatayı raporlayabilir, raporlamıyorsa, bir boş düğüm kümesi döndürerek hatayı ortadan kaldırabilir. Özkaynağın alınıp getirilmesi ile ilgili olası tek hata çeşidi XSLT işlemcinin tanım-yeri tarafından kullanılan tanım-yeri şemasını desteklemeyişidir. Bir XSLT işlemcinin her tanım-yeri şemasını desteklemesi gerekmez. XSLT işlemcinin belgeleri, XSLT işlemcinin hangi tanım-yeri şemalarını desteklediğini açıklamalıdır.</p><p>Eğer tanım-yeri başvurusu bir bölüm betimleyici (adresin sonunda yer alan ve # imi ile başlayan dizgecik) içermiyorsa, belgenin sadece kök düğümünü içeren bir düğüm kümesi döner. Eğer tanım-yeri başvurusu bir bölüm betimleyici içeriyorsa, tanım-yeri başvurusunun bölüm betimleyicisi tarafından betimlenen ağaçtaki düğümleri içeren bir düğüm kümesi döner. Bölüm betimleyicinin ifade ettiği anlam, tanım-yerinden alınıp getirilen özkaynağın ortam türüne bağımlıdır. Eğer bölüm betimleyicinin işlenmesi ile ilgili bir hata oluşmuşsa, XSLT işlemci hatayı raporlayabilir, raporlamıyorsa, bir boş düğüm kümesi döndürerek hatayı ortadan kaldırabilir. Olası hatalar şunlar olabilir:</p><ul><li><p>Bölüm betimleyici bir XSLT düğüm kümesi tarafından ifade edilemeyecek şeyleri betimliyordur (örneğin, bir metin düğümündeki bir karakter aralığı).</p></li><li><p>XSLT işlemci tanım-yerinden alınıp getirilen özkaynağın ortam türüne özgü bölüm betimleyiciyi desteklemiyordur. Bir XSLT işlemcinin her ortam türünü desteklemesi gerekmez. XSLT işlemcinin belgeleri, XSLT işlemcinin hangi ortam türlerini desteklediğini açıklamalıdır.</p></li></ul><p>Özkaynağın alınıp getirilmesinin sonucu olan veri algetir işleminin sonucunun ortam türünden bağımsız olarak bir XML belge olarak çözümlenir; eğer tepe seviye ortam türü <code>text</code> ise, ortam türünün <code>text/xml</code> olduğu durumda uygulanan yöntemle çözümlenir; aksi takdirde, <code>application/xml</code> ortam türüne özgü yöntemle çözümlenir.</p><dl class="note"><dt class="prefix"><b>Not:</b></dt><dd>Tepe-seviyeden bir <code>xml</code> ortam türü olmadığından <code>text/xml</code> veya <code>application/xml</code> ortam türünde olmayan veri yine de fiilen XML olabilir.<p></p></dd></dl><p>Tanım-yeri başvurusu göreli olabilir. İkinci argümandaki düğüm kümesinde, belgedeki sıraya göre ilk olan düğümün temel tanım-yeri (bkz, <a href="data-model.html#base-uri"><b>Temel Tanım-yeri</b></a>), göreli tanım yerlerini mutlak tanım yerine dönüştürmek için temel tanım-yeri olarak kullanılır. İkinci argümanda boş düğüm kümesi ile göreli tanım-yeri belirtmek bir hatadır.  XSLT işlemci hatayı raporlayabilir, raporlamıyorsa, bir boş düğüm kümesi döndürerek hatayı ortadan kaldırabilir. Eğer ikinci argüman hiç belirtilmemişse, biçembentte <a href="add-func.html#function-document"><code class="function">document</code></a> işlevinin çağrıldığı ifadeyi içeren düğüm öntanımlı değerdir. Göreli tanım-yeri başvurusunun çözümlenmesini sağlaması nedeniyle, sıfır uzunluktaki bir tanım-yeri başvurusunun belgeye bir başvuru oluşuna dikkat ediniz; bu bakımdan, <code>document("")</code> ifadesi biçembendin kök düğümüne karşılıktır; biçembendin ağaç gösterimi, biçembendi kaynak belgenin başında içeren XML belgeyle tamamen aynıdır.</p><p>Eğer iki belge aynı tanım-yerine sahipse bunlar aynı belge olarak ele alınır. Karşılaştırma için kullanılan tanım-yeri, göreli tanım-yerlerini çözümlemekte kullanılan ve bir bölüm betimleyici içermeyen mutlak tanım-yeridir. Eğer ikisi de aynı belgeye aitse iki kök düğüm aynı kök düğüm olarak ele alınır. Bu bakımdan aşağıdaki ifade daima doğru sonuç verecektir:</p><div class="example"><pre>generate-id(document("foo.xml"))=generate-id(document("foo.xml"))</pre></div><p><a href="add-func.html#function-document"><code class="function">document</code></a> işlevi, bir düğüm kümesinin birden fazla belgeden düğümler içermesini olasılığını arttırır.  Böyle bir düğüm kümesi ile aynı belgedeki iki düğümün göreli belge sırası XPath [<a href="bibref.html#XPATH">XPath</a>] tarafından tanımlanmış normal <a href="../xpath#dt-document-order">belge sırası</a> olacaktır. İki düğümün farklı belgelerdeki göreli belge sırası, bu iki düğümü içeren belgelerin gerçeklenime bağımlı sıralamasına göre saptanır. Sürekli olarak aynı sonucu vermek dışında gerçeklenimlerin belgeleri nasıl sıralayacağıyla ilgili bir kısıtlama yoktur: Bir gerçeklenim, aynı belge kümesi için daima aynı sıralamayı yapmak zorundadır.</p></div><div class="div2"><h3><a name="key" id="key"></a>12.2 Anahtarlar</h3><p>Anahtarlar, belgelerde örtük bir çapraz başvuru yapısıyla çalışma imkanı verir. XML'deki <code>ID</code>, <code>IDREF</code> ve <code>IDREFS</code> öznitelik türleri XML belgelerin kendi çapraz başvurularını doğrudan oluşturabilmeleri için bir mekanizma sağlar. XSLT bunu XPath <a href="../xpath#function-id"><b><code>id</code></b></a> işlevi üzerinden destekler. Bununla birlikte bu mekanizmanın bazı gereklilikleri vardır:</p><ul><li><p>ID türündeki öznitelikler örneğin DTD gibi bir yerde bildirilmelidir. Eğer bir ID özniteliği bir ID türünden öznitelik olarak sadece harici bir DTD altkümesinde bildirilmişse, bu öznitelik sadece, eğer XML işlemci bu harici DTD altkümesini okursa bir ID türünde öznitelik olarak tanınacaktır. Ancak, XML Önergesi, XML işlemcilerin harici DTD altkümelerini okumasını bir zorunluluk değil, bir öneri olarak belirtir.</p></li><li><p>Bir belge eşsiz ID'lerin tek bir kümesine sahip olabilir. Ayrı ayrı bağımsız eşsiz ID kümeleri olamaz.</p></li><li><p>Bir elemanın ID'si sadece bir öznitelikte belirtilebilir; elemanın içeriğinde veya bir çocuk eleman tarafından belirtilemez.</p></li><li><p>Bir ID bir XML adı olmak zorundadır. Örneğin, boşluk içeremez.</p></li><li><p>Bir eleman en çok bir ID'ye sahip olabilir.</p></li><li><p>Belli bir ID'ye en çok bir eleman sahip olabilir.</p></li></ul><p>Bu gerekliliklerden dolayı XML belgeler, ID/IDREF/IDREFS öznitelikleriyle açıkça belirtilmese bile bir çapraz başvuru yapısına sahip olurlar.</p><p>Bir anahtar şu üçlemeye sahiptir:</p><ol class="enumar"><li><p>anahtarın sahibi olan düğüm</p></li><li><p>anahtarın ismi (bir <a href="../xpath#dt-expanded-name">genişletilmiş isim</a>)</p></li><li><p>anahtarı değeri (bir dizge)</p></li></ol><p>Bir biçembentte her belge için anahtar kümesi <a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanı kullanılarak bildirilir. Bu anahtar kümesi, <var>x</var> diye bir düğüme, <var>y</var> diye bir isme ve <var>z</var> diye bir değere sahipse, <var>x</var> düğümünün <var>z</var> değerli bir <var>y</var> anahtarı olduğundan bahsedebiliriz.</p><p>Bu bakımdan, bir anahtar, bir XML ID'sinin sınırlamalarına konu olmayan genelleştirilmiş bir ID çeşididir:</p><ul><li><p>Anahtarlar bir biçembentte <a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanları kullanılarak bildirilirler.</p></li><li><p>Bir anahtarın değerinden başka bir de ismi vardır; her anahtar ismi betimleyici uzayından bağımsız, ayrı bir isim olarak düşünülebilir.</p></li><li><p>Bir isimli anahtar değeri bir eleman için, uygun herhangi bir yerde belirtilebilir; örneğin bir öznitelikte, bir çocuk elemanda veya içerikte belirtilebilir. Belli bir isimli anahtar için bulunacak değerin yerini belirtmek için bir XPath ifadesi kullanılır.</p></li><li><p>Bir anahtarın değeri keyfi bir dizge olabilir; bir XML adı olmak zorunda değildir.</p></li><li><p>Bir belgede aynı düğümün farklı anahtar değerleri için aynı isimde çok sayıda anahtarı olabilir.</p></li><li><p>Bir belgede aynı anahtar ismine ve aynı anahtar değerine sahip çok sayıda farklı düğüm olabilir.</p></li></ul><p></p><a id="element-key" name="element-key"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto">&lt;!-- Grubu: tepe-seviyeden-eleman --&gt;
<span class="element">&lt;xsl:key</span>
  <b>name</b> = <var>nitelikli-ad</var>
  <b>match</b> = <var>örüntü</var>
  <b>use</b> = <var>ifade</var><span class="element"> /&gt;</span>
</pre></td><td align="right" valign="top" style="font-variant: small-caps;">eleman</td></tr></table><p><a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanı anahtarları bildirmek için kullanılır. <code>name</code> özniteliği ile anahtarın ismi belirtilir. <code>name</code> özniteliğinin değeri, <a href="struct.html#qname"><b>Nitelikli Adlar</b></a> bölümünde açıklandığı gibi yorumlanan bir <code><a href="../xml-names#NT-QName">NitelAd</a></code> olmalıdır. <code>match</code> özniteliği bir <a href="rules.html#NT-Pattern"><code>Örüntü</code></a> olup, bir <a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanı, belirtilen bu örüntüyle eşleşen düğümlerin anahtarları hakkında bilgi verir. <code>use</code> özniteliği anahtarın değerini belirten bir <a title="İfade tanımı" href="expr.html#dt-expression">ifade</a> olup, örüntüyle eşleşen her düğüm için bir kere değerlendirilir. Eğer sonuç bir düğüm kümesi ise, düğüm kümesindeki her düğümün belirtilen isimde, değeri düğümün dizgesel değeri olan bir anahtarı olur; aksi takdirde, sonuç bir dizgeye dönüştürülür ve örüntüyle eşleşen düğümün belirtilen isimde değeri bu dizge olan bir anahtarı olur. Bu bakımdan, bir <var>x</var> düğümünün <var>y</var> isminde ve <var>z</var> değerinde bir anahtara sahip olması için bir <a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanının sağlaması gerek ve yeter koşullar şunlardır:</p><ul><li><p><var>x</var> düğümü, <a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanının <code>match</code> özniteliğinde belirtilen örüntüyle eşleşir;</p></li><li><p><a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanının <code>name</code> özniteliğinin değeri <var>y</var>'ye eşit olup,</p></li><li><p><a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanının <code>use</code> özniteliğinde belirtilen ifade, bir <var>u</var> nesnesinden elde edilen bir geçerli düğüm listesindeki geçerli düğüm olarak <var>x</var> düğümüyle değerlendirildiğinde, <var>z</var>, ya <var>u</var>'nun <a href="../xpath#function-string"><b><code>string</code></b></a> işlevinin yaptığı gibi bir dizgeye dönüştürülmesinin sonucuna eşittir ya da <var>u</var> bir düğüm kümesi olup, <var>z</var> değeri de <var>u</var>'daki düğümlerin bir veya daha fazlasının dizgesel değerine eşittir.</p></li></ul><p>Ayrıca, belli bir düğümle eşleşen birden fazla <a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanı olabileceğini de aklınızdan çıkarmayın; böyle <a href="add-func.html#element-key"><span class="elemref"><tt>xsl:key</tt></span></a> elemanlarının hepsi aynı <a title="İthal Önceliği tanımı" href="struct.html#dt-import-precedence">ithal önceliği</a>ne sahip olmasalar bile kullanılırlar.</p><p><code>use</code> veya <code>match</code> özniteliğinin değer olarak bir <code><a href="../xpath#NT-VariableReference">DeğişkenGönderimi</a></code> veya bir <a href="add-func.html#function-key"><code class="function">key</code></a> işlev çağrısı içermesi bir hatadır.</p><a name="function-key" id="function-key"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto"><em>düğüm-kümesi</em> <b>key</b>(<var>dizge</var>, <var>nesne</var>)</pre></td><td align="right" valign="top" style="font-variant: small-caps;">İşlev</td></tr></table><p><a href="add-func.html#function-key"><code class="function">key</code></a> işlevi ID'ler için <a href="../xpath#function-id"><b><code>id</code></b></a> işlevinin yaptığını anahtarlar için yapar. İlk argüman anahtarın ismini belirtir. Argümanın değeri <a href="struct.html#qname"><b>Nitelikli Adlar</b></a> bölümünde açıklandığı gibi yorumlanan bir <code><a href="../xml-names#NT-QName">NitelAd</a></code> olmalıdır. İkinci argüman bir düğüm kümesi olduğunda, sonuç, bu düğüm kümesindeki her düğümün <a href="../xpath#dt-string-value">dizgesel değer</a>ine <a href="add-func.html#function-key"><code class="function">key</code></a> işlevinin uygulanmasından elde edilen sonuçlarının birleşimi olacaktır. İkinci argüman herhangi bir başka türde bir değer içerdiğinde, argüman <a href="../xpath#function-string"><b><code>string</code></b></a> işlevinin yaptığı gibi bir dizgeye dönüştürülür; bu durumda, işlevden dönen sonuç, değeri bu dizgeye eşit bir isimli anahtara sahip bağlamsal düğümle aynı belgedeki düğümleri içeren bir düğüm kümesi olur.</p><a name="idp24999728" id="idp24999728"></a><dl class="example"><dt><b>Örnek: </b></dt><dd>Örneğin, şöyle bir bildirim olsun:<p></p><pre>&lt;xsl:key name="idkey" match="div" use="@id"/&gt;</pre><p><code>key('idkey', @ref)</code> ifadesi, <code>id(@ref)</code> ifadesinin sonucu olan düğüm kümesi ile döner; XML kaynak belgesinde özniteliğin ID türünde şöyle bildirilmiş olduğu,</p><pre>&lt;!ATTLIST div id ID #IMPLIED&gt;</pre><p>ve geçerli düğümün <code>ref</code> özniteliğinin herhangi bir boşluk karakteri içermediği varsayımıyla.</p></dd></dl><a name="idp25004640" id="idp25004640"></a><dl class="example"><dt><b>Örnek: </b></dt><dd>Bir işlev kütüphanesini açıklayan bir belgemiz olduğunu ve işlevleri tanımlamak için bir <code>prototype</code> elemanı kullanıldığını varsayalım.<p></p><pre>&lt;prototype name="key" return-type="düğüm-kümesi"&gt;
&lt;arg type="dizge"/&gt;
&lt;arg type="nesne"/&gt;
&lt;/prototype&gt;</pre><p>İşlev isimlerinden bu tanıma atıfta bulunmak için de <code>function</code> elemanı kullanılıyor olsun.</p><pre>&lt;function&gt;key&lt;/function&gt;</pre><p>Buradan hareketle biçembent gönderimlerle tanımlar arasındaki hiper bağları şöyle üretecektir:</p><pre>&lt;xsl:key name="func" match="prototype" use="@name"/&gt;

&lt;xsl:template match="function"&gt;
&lt;b&gt;
  &lt;a href="#{generate-id(key('func',.))}"&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/a&gt;
&lt;/b&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="prototype"&gt;
&lt;p&gt;&lt;a name="{generate-id()}"&gt;
&lt;b&gt;Function: &lt;/b&gt;
...
&lt;/a&gt;&lt;/p&gt;
&lt;/xsl:template&gt;</pre><p></p></dd></dl><a name="idp25009824" id="idp25009824"></a><dl class="example"><dt><b>Örnek: (çevirmenden)</b></dt><dd><p>Bu anahtarlar konusu bu işin en zor anlaşılan kısmıdır. Yukarıdakine benzer ama yukarıdakinden her bakımdan daha yararlı olacağını umduğum bir örneği vermek istiyorum.</p><p>Bir belirtim belgemiz olsun. Belgede bahsedilen sabitlerden bazılarının tanımları varken bazıları sadece birer dizgesel sabit olsun. Tanımları olanların isimleri belgede geçtikçe (<code>&lt;literal&gt;sabit&lt;/literal&gt;</code> gibi) bu isimler bu tanımlara aynı zamanda birer hiper bağ olsun, tanımları olmayanların da birer sabit oldukları belli olsun, istiyoruz. </p><pre>&lt;xsl:template match="literal"&gt;
  &lt;xsl:variable name="idx" select="concat('value-def-', text())"/&gt;
  &lt;xsl:variable name="targets" select="key('ids', $idx)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="count($targets) &gt; 0"&gt;
      &lt;a href="#{$idx}"&gt;
        &lt;code&gt;&lt;xsl:apply-templates/&gt;&lt;/code&gt;
      &lt;/a&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;tt&gt;&lt;xsl:apply-templates/&gt;&lt;/tt&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;</pre><p>Örneklenimin ilk yönergesinde bir değişken ataması yapılıyor. <code>$idx</code> değişkenine, <code>literal</code> elemanının içeriğinden bir ID değeri oluşturup bunu atıyoruz. İkinci yönergedeki değişken atamasında ise <code>$idx</code> değişkenine atadığımız ID değerini içeren düğümleri <code>$ids</code> değişkeninin değerinden alıp <code>$targets</code> değişkenine atıyoruz. Tabii bunu yapabilmek için biçembentin başlarında şöyle bir yönergemiz olması gerek (bu anahtar, belgede birer <code>id</code> özniteliğine sahip bütün elemanları toplayıp <code>$ids</code> değişkenine atar):</p><pre>&lt;xsl:key name="ids" match="*" use="@id"/&gt;</pre><p><a href="condproc.html#element-when"><span class="elemref"><tt>xsl:when</tt></span></a> elemanında aradığımız ID'ye sahip eleman var mı acaba diye bir sınama yapıyoruz. Varsa, XML belgedeki  <code>&lt;literal&gt;sabit&lt;/literal&gt;</code> yerine XHTML belgeye sabitin tanımını işaret eden bir hiper bağ yerleştiriyoruz (bu bağ için gereken ID değerini bildiğimiz için bir önceki örnekte olduğu gibi bir ID üretmemiz gerekmiyor). Yoksa, içeriğini bir dizgesel sabit olduğunu vurgulayacak bir imlenimin (<code>tt</code>) içine alıyoruz.</p></dd></dl><p><a href="add-func.html#function-key"><code class="function">key</code></a> işlevi daima geçerli düğümle aynı belgede yer alan düğümleri döndürür; bir anahtarı başka bir belgeden almak için önce geçerli düğümün değiştirilmesi gerekir.</p><a name="idp25023136" id="idp25023136"></a><dl class="example"><dt><b>Örnek: </b></dt><dd>Bir belgenin <code>&lt;bibref&gt;XSLT&lt;/bibref&gt;</code> biçiminde kaynakça girdilerine atıfta bulunduğunu ve bu kaynakçanın da <code>bib.xml</code> adlı ayrı bir XML belgede girdilerinin şöyle bir veri modeliyle tutulduğunu varsayalım:<p></p><pre>&lt;entry name="XSLT"&gt;...&lt;/entry&gt;</pre><p>Bu durumda biçembent <code>bibref</code> elemanlarını dönüştürmek için şu kodları içerebilirdi:</p><pre>&lt;xsl:key name="bib" match="entry" use="@name"/&gt;

&lt;xsl:template match="bibref"&gt;
  &lt;xsl:variable name="name" select="."/&gt;
  &lt;xsl:for-each select="document('bib.xml')"&gt;
    &lt;xsl:apply-templates select="key('bib',$name)"/&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:template&gt;</pre><p></p></dd></dl></div><div class="div2"><h3><a name="format-number" id="format-number"></a>12.3 Sayı Biçimleme</h3><a name="function-format-number" id="function-format-number"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto"><em>dizge</em> <b>format-number</b>(<var>sayı</var>, <var>dizge</var>, <var>dizge</var>?)</pre></td><td align="right" valign="top" style="font-variant: small-caps;">İşlev</td></tr></table><p><a href="add-func.html#function-format-number"><code class="function">format-number</code></a> işlevi birinci argümanında belirtilen sayıyı ikinci argümanında belirtilen biçim örüntüsü dizgesini kullanarak bir dizgeye dönüştürür. Üçüncü argümanda onluk sayı biçimi belirtilir, üçüncü argümanın yokluğunda öntanımlı onluk sayı biçimi kullanılır. Biçim örüntüsü dizgesi JDK 1.1 <a href="http://java.sun.com/products/jdk/1.1/docs/api/java.text.DecimalFormat.html">DecimalFormat</a> sınıfı tarafından belirtilen sözdizimine sahiptir. Biçim örüntüsü dizgesinin gösterimi yerelleştirilebilir: onluk biçim örüntüdeki karakterlerin hangilerinin ne anlama geldiğini belirler (yerelleştirilmeyen tırnak karakteri hariç). Biçim örüntüsü sent imini (#x00A4) içeremez; Bu özellik için destek JDK 1.1'e ilk sürümünden sonra eklenmiştir. Onluk biçim ismi <a href="struct.html#qname"><b>Nitelikli Adlar</b></a> bölümünde açıklandığı gibi yorumlanan bir <code><a href="../xml-names#NT-QName">NitelAd</a></code> olmalıdır. Biçembendin onluk biçimin  <a href="../xpath#dt-expanded-name">genişletilmiş isim</a>li bir bildirimini içermemesi bir hatadır.</p><dl class="note"><dt class="prefix"><b>Not:</b></dt><dd>Gerçeklenimlerin ne JDK 1.1 kullanması ne de Java dilinde geliştirme yapmaları gereklidir.<p></p></dd></dl><p></p><dl class="note"><dt class="prefix"><b>Not:</b></dt><dd>Biçembentler yuvarlamayı denetim altına almak için XPath'daki diğer oluşumları kullanabilirler.<p></p></dd></dl><p></p><a id="element-decimal-format" name="element-decimal-format"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto">&lt;!-- Grubu: tepe-seviyeden-eleman --&gt;
<span class="element">&lt;xsl:decimal-format</span>
  <code>name</code> = <var>nitelikli-ad</var>
  <code>decimal-separator</code> = <var>karakter</var>
  <code>grouping-separator</code> = <var>karakter</var>
  <code>infinity</code> = <var>dizge</var>
  <code>minus-sign</code> = <var>karakter</var>
  <code>NaN</code> = <var>dizge</var>
  <code>percent</code> = <var>karakter</var>
  <code>per-mille</code> = <var>karakter</var>
  <code>zero-digit</code> = <var>karakter</var>
  <code>digit</code> = <var>karakter</var>
  <code>pattern-separator</code> = <var>karakter</var><span class="element"> /&gt;</span>
</pre></td><td align="right" valign="top" style="font-variant: small-caps;">eleman</td></tr></table><p><a href="add-func.html#element-decimal-format"><span class="elemref"><tt>xsl:decimal-format</tt></span></a> elemanı, <a href="add-func.html#function-format-number"><code class="function">format-number</code></a> işlevi tarafından kullanılan bir biçim örüntüsünün yorumlanışını denetleyen bir onluk biçim bildirir. <code>name</code> özniteliği belirtilmişse, eleman isimli bir onluk biçim belirtir. <code>name</code> özniteliğinin değeri <a href="struct.html#qname"><b>Nitelikli Adlar</b></a> bölümünde açıklandığı gibi yorumlanan bir <code><a href="../xml-names#NT-QName">NitelAd</a></code> olmalıdır. Öntanımlı onluk biçim bildirimi yapmak veya tüm öznitelikler (öntanımlılar dahil) için aynı değerle bildirilmiş olmadıkça aynı isimde birden fazla onluk biçim bildirimi yapmak (<a title="İthal Önceliği tanımı" href="struct.html#dt-import-precedence">ithal öncelikleri</a> farklı olsa bile) bir hatadır. Eğer bir biçembent bir öntanımlı onluk biçim bildirimi içermiyorsa, özniteliksiz <a href="add-func.html#element-decimal-format"><span class="elemref"><tt>xsl:decimal-format</tt></span></a> elemanına eşdeğer bir bildirim uygulanır.</p><p><a href="add-func.html#element-decimal-format"><span class="elemref"><tt>xsl:decimal-format</tt></span></a> elemanının diğer öznitelikleri JDK 1.1 <a href="http://java.sun.com/products/jdk/1.1/docs/api/java.text.DecimalFormatSymbols.html">DecimalFormatSymbols</a> sınıfındaki yöntemlere karşılıktır. Her <code>get</code>/<code>set</code> çiftine karşılık <a href="add-func.html#element-decimal-format"><span class="elemref"><tt>xsl:decimal-format</tt></span></a> elemanı için tanımlanmış bir öznitelik vardır.</p><p>Aşağıdaki öznitelikler hem biçim örüntüsündeki karakterlerin yorumlanışını denetler hem de sayının biçimlenmesi sonucu elde edilebilen karakterleri belirtirler:</p><ul><li><p><code>decimal-separator</code> özniteliği ondalık ayraç olarak kullanılacak karakteri (Türkçe için virgüldür) belirtir; öntanımlı değer nokta (<code>.</code>) karakteridir.</p></li><li><p><code>grouping-separator</code> özniteliği bölükleme için kullanılan (Türkçe için noktadır) karakteri belirtir (binler bölükleri gibi); öntanımlı değer virgül (<code>,</code>) karakteridir.</p></li><li><p><code>percent</code> özniteliği yüzde imi olarak kullanılacak karakteri (Türkçe için de % karakteridir ama sayının ardına değil önüne konur) belirtir;  öntanımlı değer yüzde (<code>%</code>) karakteridir.</p></li><li><p><code>per-mille</code> özniteliği her-milde-bir karakteri olarak kullanılacak karakteri;  öntanımlı değer Unicode her-milde-bir (<code>#x2030</code>) karakteridir.</p></li><li><p><code>zero-digit</code> özniteliği sıfır ratamı olarak kullanılacak karakteri belirtir; öntanımlı değer sıfır (<code>0</code>) rakamıdır.</p></li></ul><p>Aşağıdaki öznitelikler biçim örüntüsündeki karakterlerin yorumlanışını denetlerler:</p><ul><li><p><code>digit</code> özniteliğinde biçim örüntüsünde rakam ifade eden karakter belirtilir; öntanımlı değer diyez (<code>#</code>) karakteridir.</p></li><li><p><code>pattern-separator</code> özniteliğinde pozitif ve negatif alt örüntüleri ayırmakta kullanılan karakter belirtilir; öntanımlı değer noktalı virgül (<code>;</code>) karakteridir.</p></li></ul><p>Aşağıdaki öznitelikler biçimlenmiş sayıda yer alan karakterleri veya dizgeleri belirtmekte kullanılır:</p><ul><li><p><code>infinity</code> özniteliğinde sonsuzluğu belirtmekte kullanılan dizge belirtilir;  öntanımlı değer <code>Infinity</code> dizgesidir.</p></li><li><p><code>NaN</code> özniteliğinde NaN (Not-a-Number: bir-Sayı-Değil) değerini belirtmekte kullanılan dizge belirtilir;  öntanımlı değer <code>NaN</code> dizgesidir.</p></li><li><p><code>minus-sign</code> özniteliğinde eksi imi olarak kullanılacak karakter belirtilir; öntanımlı değer tire (<code>-</code>, #x2D) karakteridir.</p></li></ul><p></p></div><div class="div2"><h3><a name="misc-func" id="misc-func"></a>12.4 Çeşitli Ek İşlevler</h3><a name="function-current" id="function-current"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto"><em>düğüm-kümesi</em> <b>current</b>()</pre></td><td align="right" valign="top" style="font-variant: small-caps;">İşlev</td></tr></table><p><a href="add-func.html#function-current"><code class="function">current</code></a> işlevi, tek üyesi <a title="Geçerli Düğüm tanımı" href="intro.html#dt-current-node">geçerli düğüm</a> olan bir düğüm kümesi ile döner. Son tahlilde (başka bir ifadenin içinde yer almayan bir ifadede), geçerli düğüm daima bağlamsal düğümle aynıdır. Bu bakımdan,</p><div class="example"><pre>&lt;xsl:value-of select="current()"/&gt;</pre></div><p>ile</p><div class="example"><pre>&lt;xsl:value-of select="."/&gt;</pre></div><p>aynı anlama gelir. Bununla birlikte, köşeli ayraçlar içindeki geçerli düğüm bağlamsal düğümden farklı bir düğüm olacaktır. Örneğin,</p><div class="example"><pre>&lt;xsl:apply-templates select="//glossary/item[@name=current()/@ref]"/&gt;</pre></div><p>ebeveynleri <code>glossary</code> elemanları olup, değerleri geçerli düğümün <code>ref</code> özniteliğinin değerine eşit olan birer <code>name</code> özniteliğine sahip  tüm <code>item</code> elemanlarını işleyecektir. Aşağıdaki yönerge bunu yapmaz:</p><div class="example"><pre>&lt;xsl:apply-templates select="//glossary/item[@name=./@ref]"/&gt;</pre></div><p>yönergesi</p><div class="example"><pre>&lt;xsl:apply-templates select="//glossary/item[@name=@ref]"/&gt;</pre></div><p>ile aynı anlama gelir. Bunlar, ebeveynleri <code>glossary</code> elemanları olup, <code>name</code> ve <code>ref</code> özniteliklerinin değerleri aynı olan tüm <code>item</code> elemanlarını işleyecektir.</p><p><a href="add-func.html#function-current"><code class="function">current</code></a> işlevini bir <a title="Örüntü tanımı" href="rules.html#dt-pattern">Örüntü</a> içinde kullanmak bir hatadır.</p><dl class="note"><dt class="prefix"><b>Çevirmenin notu: </b></dt><dd>Geçerli düğümü bir değişkene atayıp işlevin yerine bu değişkeni köşeli ayraçlar içinde kullanmak da istenen sonucu verecektir.</dd></dl><a name="function-unparsed-entity-uri" id="function-unparsed-entity-uri"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto"><em>dizge</em> <b>unparsed-entity-uri</b>(<var>dizge</var>)</pre></td><td align="right" valign="top" style="font-variant: small-caps;">İşlev</td></tr></table><p><a href="add-func.html#function-unparsed-entity-uri"><code class="function">unparsed-entity-uri</code></a> işlevi, bağlamsal düğümle aynı belgede ismiyle belirtilmiş bir çözümlenmemiş öğenin tanım-yerini döndürür  (bkz, <a href="data-model.html#unparsed-entities"><b>Çözümlenmemiş Öğeler</b></a>). Böyle bir öğe yoksa boş dizgeyle döner.</p><a name="function-generate-id" id="function-generate-id"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto"><em>dizge</em> <b>generate-id</b>(<var>düğüm-kümesi</var>?)</pre></td><td align="right" valign="top" style="font-variant: small-caps;">İşlev</td></tr></table><p><a href="add-func.html#function-generate-id"><code class="function">generate-id</code></a> işlevi argümanında belirtilen düğüm kümesinin belgedeki sıraya göre ilk rastlanılan düğümünü eşsiz olarak betimleyen bir dizge ile döner. Eşsiz betimleyici bir ASCII harf ile başlamalı ve ASCII abecesayısal karakterlerinden oluşmalıdır. Bir gerçeklenim, aynı düğüm için daima aynı betimleyiciyi ve farklı düğümler için farklı betimleyicileri üretecek herhangi bir yöntemi seçmekte özgürdür. Bir gerçeklenim her dönüşümde aynı betimleyicileri üretmek zorunda değildir. Üretilmiş bir eşsiz betimleyicinin belgedeki mevcut (bu üretimin sonucu olmayan) eşsiz betimleyicilerden farklı olmak zorunda değildir. Eğer işleve belirtilen düğüm kümesi boşsa işlev boş dizge döndürür. Hiç argüman belirtilmemişse, bağlamsal düğüm öntanımlıdır.</p><a name="function-system-property" id="function-system-property"></a><table class="proto" width="100%" cellpadding="0" cellspacing="0" border="0"><tr><td><pre class="proto"><em>nesne</em> <b>system-property</b>(<var>dizge</var>)</pre></td><td align="right" valign="top" style="font-variant: small-caps;">İşlev</td></tr></table><p>Argüman bir <code><a href="../xml-names#NT-QName">NitelAd</a></code> olarak değerlendirilecek bir dizge olmalıdır. Bu <code><a href="../xml-names#NT-QName">NitelAd</a></code> ifadenin  etki alanındaki isim-alanı bildirimleri kullanılarak bir isme genişletilir. <a href="add-func.html#function-system-property"><code class="function">system-property</code></a> işlevi bu isim tarafından betimlenen sistem gerecinin değeri olan nesne ile döner.  Böyle bir sistem gereci yoksa boş dizge döner.</p><p>Gerçeklenimlerin aşağıdaki sistem gereçlerini hepsi XSLT isim-alanında yer alacak şekilde sağlamalıdırlar:</p><ul><li><tt>xsl:version</tt>, işlemci tarafından gerçeklenmiş XSLT sürümünü belirten bir sayı; bu sayı bu belirtimin gerçeklenimi için 1.0 olmalıdır.</li><li><tt>xsl:vendor</tt>, XSLT işlemcinin üreticisini tanıtan bir dizge.</li><li><tt>xsl:vendor-url</tt>, XSLT işlemcinin üreticisinin adresini içeren bir dizge; genellikle üreticinin ev sayfasının adresidir.</li></ul><p>Üreticilerin XSLT isim-alanında başka sistem gereci tanımlamaması gerekir.</p></div></div><p></p><table width="100%" summary="Gezinme Çubuğu" cellpadding="1" cellspacing="0" style="border:1px dotted #999999"><tr><td width="30%"><a href="variables.html">Önceki</a></td><td width="*" align="center"><a href="index.html#index-toc">Yukarı</a></td><td width="30%" align="right"><a href="message.html">Sonraki</a></td></tr><tr><td width="30%">Değişkenler ve Değergeçler</td><td width="*" align="center">Bir <a href="http://belgeler.org.tr">Linux Kitaplığı</a> Sayfası</td><td width="30%" align="right">İletiler</td></tr></table></body></html>
