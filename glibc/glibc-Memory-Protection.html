<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="tr" xml:lang="tr">
  <head>
    <title>3.4. Belleğin Korunması</title>
    <meta name="generator" content="DocBook XSL Stylesheets V-special (derived from DocBook XSL v1.79.1 for Turkish Linux Documentation Project by Nilgün Belma Bugüner - nilgun (at) tlbp.org.tr)" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="/style/nav.css" />
    <link rel="icon" type="image/png" href="/images/belgeler-logo.png" />
    <meta name="robots" content="index, follow" />
  </head>
  <body>
    <header>
      <div class="navbar">
        <div style="width:33%" class="dropdown">
          <button type="button" class="dropbtn" onclick="window.location.assign('glibc-Resizing-the-Data-Segment.html')">Önceki</button>
          <div class="dropdown-content">3.3. Veri Bölütünün Boyunun Değiştirilmesi</div>
        </div>
        <div style="width:34%" class="dropdown">
          <button class="dropbtn">Yukarı</button>
          <div class="dropdown-content">
            <button type="button" class="dropbtn" onclick="window.location.assign('/index.html')">Baş Sayfa</button>
            <button type="button" class="dropbtn" onclick="window.location.assign('/KiTAPLIK/index.html')">Kitaplık</button>
            <button type="button" class="dropbtn" onclick="window.location.assign('glibc.html')">Ana Başlık</button>
            <button type="button" class="dropbtn" onclick="window.location.assign('glibc-Memory.html')">Üst Başlık</button>
          </div>
        </div>
        <div style="width:33%" class="dropdown">
          <button type="button" class="dropbtn" onclick="window.location.assign('glibc-Memory-Protection-Keys.html')">Sonraki</button>
          <div class="dropdown-content">3.4.1. Bellek Koruma Anahtarları</div>
        </div>
      </div>
    </header>
    <section class="mainpage">
      <div class="crumbs">
        <p>  </p>
      </div>
      <section class="chapter" id="glibc-Memory-Protection">
        <div class="titlepage">
          <div>
            <div>
              <h2 class="title">3.4. Belleğin Korunması</h2>
            </div>
          </div>
        </div>
        <div class="toc">
          <div class="toc-title">İçindekiler</div>
          <dl class="toc">
            <dt>3.4.1. <a href="glibc-Memory-Protection-Keys.html">Bellek Koruma Anahtarları</a>  -  Her bellek sayfası ile ilişkili bir anahtar vardır.</dt>
          </dl>
        </div>
        <span id="idm88763" class="indexterm"></span>
        <span id="idm88765" class="indexterm"></span>
        <span id="idm88767" class="indexterm"></span>
        <span id="idm88770" class="indexterm"></span>
        <span id="idm88773" class="indexterm"></span>
        <p>
   Bir sayfa <a href="glibc-Memory-mapped-I-O.html#glibc-fn-mmap"><strong class="function"><code>mmap</code></strong></a> kullanılarak eşlendiğinde, sayfa koruma bayrakları, koruma bayrakları bağımsız değişkeni kullanılarak belirtilebilir. Bkz. <a class="xref" href="glibc-Memory-mapped-I-O.html" title="13.8. Bellek Eşlemli G/Ç"><em>Bellek Eşlemli G/Ç</em></a>.
  </p>
        <p>
   Aşağıdaki bayraklar kullanılabilir.
  </p>
        <div class="csynopsis"><div class="cstype">      sabit</div>
   <span id="glibc-vr-PROT_WRITE" class="indexterm"></span>
   <div class="csproto"><table border="0" class="csprototab" style="cellspacing: 0; cellpadding: 0;"><tr><td colspan="2"><code>#include &lt;</code><code class="filename"><a class="filename" href="https://sourceware.org/git/?p=glibc.git;a=blob_plain;f=include/sys/mman.h;hb=HEAD" target="_top">sys/mman.h</a></code><code>&gt;</code></td></tr><tr><td style="vertical-align: text-top;"><strong><code class="function">PROT_WRITE</code></strong></td><td style="vertical-align: text-top;"></td></tr></table></div>
   <p>
    Belleğe yazılabilir.
   </p>
   
  </div>
        <div class="csynopsis"><div class="cstype">      sabit</div>
   <span id="glibc-vr-PROT_READ" class="indexterm"></span>
   <div class="csproto"><table border="0" class="csprototab" style="cellspacing: 0; cellpadding: 0;"><tr><td colspan="2"><code>#include &lt;</code><code class="filename"><a class="filename" href="https://sourceware.org/git/?p=glibc.git;a=blob_plain;f=include/sys/mman.h;hb=HEAD" target="_top">sys/mman.h</a></code><code>&gt;</code></td></tr><tr><td style="vertical-align: text-top;"><strong><code class="function">PROT_READ</code></strong></td><td style="vertical-align: text-top;"></td></tr></table></div>
   <p>
    Bellek okunabilir. Bazı mimarilerde bu bayrak, belleğin de yürütülebileceğini ima eder (aynı anda <a href="glibc-Memory-Protection.html#glibc-vr-PROT_EXEC"><strong class="varname"><code>PROT_EXEC</code></strong></a> belirtilmiş gibi).
   </p>
   
  </div>
        <div class="csynopsis"><div class="cstype">      sabit</div>
   <span id="glibc-vr-PROT_EXEC" class="indexterm"></span>
   <div class="csproto"><table border="0" class="csprototab" style="cellspacing: 0; cellpadding: 0;"><tr><td colspan="2"><code>#include &lt;</code><code class="filename"><a class="filename" href="https://sourceware.org/git/?p=glibc.git;a=blob_plain;f=include/sys/mman.h;hb=HEAD" target="_top">sys/mman.h</a></code><code>&gt;</code></td></tr><tr><td style="vertical-align: text-top;"><strong><code class="function">PROT_EXEC</code></strong></td><td style="vertical-align: text-top;"></td></tr></table></div>
   <p>
    Bellek daha sonra yürütülecek işlemci talimatlarını saklamak için kullanılabilir.  Bazı mimarilerde bu bayrak, belleğin okanabileceğini ima eder (aynı anda <a href="glibc-Memory-Protection.html#glibc-vr-PROT_READ"><strong class="varname"><code>PROT_READ</code></strong></a> belirtilmiş gibi).
   </p>
   
  </div>
        <div class="csynopsis"><div class="cstype">      sabit</div>
   <span id="glibc-vr-PROT_NONE" class="indexterm"></span>
   <div class="csproto"><table border="0" class="csprototab" style="cellspacing: 0; cellpadding: 0;"><tr><td colspan="2"><code>#include &lt;</code><code class="filename"><a class="filename" href="https://sourceware.org/git/?p=glibc.git;a=blob_plain;f=include/sys/mman.h;hb=HEAD" target="_top">sys/mman.h</a></code><code>&gt;</code></td></tr><tr><td style="vertical-align: text-top;"><strong><code class="function">PROT_NONE</code></strong></td><td style="vertical-align: text-top;"></td></tr></table></div>
   <p>
    Bu bayrak tek başına belirtilmelidir.
   </p>
   <p>
    Bellek kayıt altına alınmıştır, ancak okunamaz, yazılamaz veya yürütülemez. Bu bayrak, bir <a href="glibc-Memory-mapped-I-O.html#glibc-fn-mmap"><strong class="function"><code>mmap</code></strong></a> çağrısında belirtilirse, süreçte ileride kullanılmak üzere bir sanal bellek alanı belirlenir ve <a href="glibc-Memory-mapped-I-O.html#glibc-vr-MAP_FIXED"><strong class="varname"><code>MAP_FIXED</code></strong></a> bayrağı olmaksızın, <a href="glibc-Memory-mapped-I-O.html#glibc-fn-mmap"><strong class="function"><code>mmap</code></strong></a> çağrıları bunu sonraki tahsisler için kullanmaz. Çekirdek, anonim eşlemler için eşlemin oluşturulduğu sırada tahsis edilmek üzere herhangi bir fiziksel belleği kayıt altına almaz.
   </p>
   
  </div>
        <p>
   Donanım, erişim denetimi amacıyla hepsini aynı şekilde ele alsa bile (bazı platformlarda <a href="glibc-Memory-Protection.html#glibc-vr-PROT_READ"><strong class="varname"><code>PROT_READ</code></strong></a> ve <a href="glibc-Memory-Protection.html#glibc-vr-PROT_EXEC"><strong class="varname"><code>PROT_EXEC</code></strong></a> ile olduğu gibi) işletim sistemi bu bayrakları ayrı ayrı takip edebilir. GNU sistemlerinde, <a href="glibc-Memory-Protection.html#glibc-vr-PROT_EXEC"><strong class="varname"><code>PROT_EXEC</code></strong></a> her zaman <a href="glibc-Memory-Protection.html#glibc-vr-PROT_READ"><strong class="varname"><code>PROT_READ</code></strong></a> anlamına gelir, böylece kullanıcılar sistemlerinde yürütülen makine kodunu görebilir.
  </p>
        <p>
   Uygun olmayan erişim parçalama arızasına sebep olur (bkz. <a class="xref" href="glibc-Program-Error-Signals.html" title="24.2.1. Yazılım Hatalarının Sinyalleri">Yazılım Hatalarının Sinyalleri</a>).
  </p>
        <p>
   Bellek tahsisinden sonra koruma bayrakları <a href="glibc-Memory-Protection.html#glibc-fn-mprotect"><strong class="function"><code>mprotect</code></strong></a> işlevi kullanılarak değiştirilebilir.
  </p>
        <div class="csynopsis"><div class="cstype">      işlev</div>
   <span id="glibc-fn-mprotect" class="indexterm"></span>
   <div class="csproto"><table border="0" class="csprototab" style="cellspacing: 0; cellpadding: 0;"><tr><td colspan="2"><code>#include &lt;</code><code class="filename"><a class="filename" href="https://sourceware.org/git/?p=glibc.git;a=blob_plain;f=include/sys/mman.h;hb=HEAD" target="_top">sys/mman.h</a></code><code>&gt;</code></td></tr><tr><td style="vertical-align: text-top;"><code class="type">int </code><strong><code class="function">mprotect</code></strong></td><td style="vertical-align: text-top;"><strong><code>(</code></strong><code class="type">void </code><strong class="type">*</strong><strong><code class="parameter">address</code></strong><strong><code>, </code></strong><code class="type">size_t </code><strong><code class="parameter">length</code></strong><strong><code>, </code></strong><code class="type">int </code><strong><code class="parameter">protection</code></strong><strong><code>)</code></strong></td></tr></table></div>
   <div class="safety"><a class="xref" href="glibc-POSIX.html#glibc-POSIX-Safety-Concepts">Evresel Güvenilirlik:</a>
     | <a class="link" href="glibc-POSIX-Safety-Concepts.html#glibc-cp-mtsafe">MT-Safe</a>
     | <a class="link" href="glibc-POSIX-Safety-Concepts.html#glibc-cp-assafe">AS-Safe</a>
     | <a class="link" href="glibc-POSIX-Safety-Concepts.html#glibc-cp-acsafe">AC-Safe</a>
   </div>
   <p>
    <code class="code">mprotect</code> işlevine yapılan başarılı bir çağrı, <em class="parameter"><code>address</code></em>'ten başlayarak en az <em class="parameter"><code>length</code></em> bayt uzunluktaki koruma bayraklarını değiştirir.
   </p>
   <p>
    <em class="parameter"><code>address</code></em>, eşleme için sayfa boyutuyla hizalanmalıdır. Sistem sayfa boyutu, <strong class="function"><code>sysconf</code></strong> işlevi <a href="glibc-Sysconf.html#glibc-vr-SC_PAGESIZE"><strong class="varname"><code>_SC_PAGESIZE</code></strong></a> ile çağrılarak elde edilebilir (bkz. <a class="xref" href="glibc-Sysconf.html#glibc-Sysconf-Definition" title="32.4.1. sysconf Tanımı"><code class="code">sysconf</code> Tanımı</a>). Sistem sayfası boyutu, anonim bellek eşlemelerinin ve çoğu dosya eşleminin sayfa korumasının değiştirilebildiği ayrıntı düzeyidir. Özel dosyalardan veya aygıtlardan eşlenen bellek, sistem sayfa boyutundan daha büyük sayfa ayrıntı düzeyine sahip olabilir ve daha büyük hizalama gerektirebilir.
   </p>
   <p>
    <em class="parameter"><code>length</code></em> ile belirtilen uzunluk, koruma bayraklarının değiştirilmesi gereken bayt sayısıdır. Özdevinimli olarak sistem sayfa boyutunun bir sonraki katına yuvarlanır.
   </p>
   <p>
    <em class="parameter"><code>protection</code></em> yukarda açıklanan <code class="code">PROT_*</code> bayraklarının birleşimidir.
   </p>
   <p>
    <code class="code">mprotect</code> işlevi başarı durumunda <code class="code">0</code>, başarısızlık durumunda <code class="code">-1</code> döndürür.
   </p>
   <p>
    Aşağıdaki <a href="glibc-Checking-for-Errors.html#glibc-vr-errno"><strong class="varname"><code>errno</code></strong></a> hata durumları bu işlev için tanımlanmıştır:
   </p>
   <div class="glosslist"><dl><dt><span class="glossterm"><code class="code">ENOMEM</code></span></dt><dd class="glossdef"><p>
       Sistem, isteği yerine getirmek için kaynak ayıramadı. Bu durum, sistemde yedeklemeye tahsis edilecek yeterli fiziksel bellek yoksa meydana gelebilir. Hata, yeni koruma bayraklarının bellek bölgesinin komşularından ayrılmasına neden olması ve bu tür farklı bellek bölgelerinin sayısı ile ilgili işlem/süreç sınırının aşılması durumunda da oluşabilir.
      </p></dd><dt><span class="glossterm"><code class="code">EINVAL</code></span></dt><dd class="glossdef"><p>
       <em class="parameter"><code>address</code></em> eşlem için sayfa sınırına düzgün olarak hizalanmamış veya <em class="parameter"><code>length</code></em> eşlem için (sistem sayfa boyuna yukarı yuvarlandıktan sonra) uygulanabilir sayfa boyunun katlarında değil ya da <em class="parameter"><code>protection</code></em> içindeki bayrakların birleşimi geçersiz.
      </p></dd><dt><span class="glossterm"><code class="code">EACCES</code></span></dt><dd class="glossdef"><p>
       Dosya tabanlı eşlem için dosya, <em class="parameter"><code>protection</code></em> ile uyumlu açma bayrakları ile açılmadı.
      </p></dd><dt><span class="glossterm"><code class="code">EPERM</code></span></dt><dd class="glossdef"><p>
       Sistem güvenlik ilkesi, belirtilen bayraklarla eşleme izin vermiyor. Örneğin, aynı anda hem <a href="glibc-Memory-Protection.html#glibc-vr-PROT_EXEC"><strong class="varname"><code>PROT_EXEC</code></strong></a> hem de <a href="glibc-Memory-Protection.html#glibc-vr-PROT_WRITE"><strong class="varname"><code>PROT_WRITE</code></strong></a> olan eşlemlere izin verilmeyebilir.
      </p></dd></dl></div>
   
  </div>
        <p>
   Bir bellek bölgesi, <code class="code">mprotect</code> işlevi, <a href="glibc-Memory-Protection.html#glibc-vr-PROT_NONE"><strong class="varname"><code>PROT_NONE</code></strong></a> koruma bayrağı ile belirtilerek erişilemez duruma getirilirse ve daha sonra tekrar erişilebilir kılınırsa, bellek önceki içeriğini korur.
  </p>
        <p>
   Bazı sistemlerde, eşleme ilk oluşturulduğunda mevcut olmayan ek bayrakları belirtmek mümkün olmatabilir. Örneğin, ilk koruma bayrakları ‘<code class="code">PROT_READ | PROT_WRITE</code>’ ise bellek bölgesini çalıştırılabilir yapma girişimi başarısız olabilir.
  </p>
        <p>
   Genel olarak <code class="code">mprotect</code> işlevi, nasıl tahsis edilmiş olursa olsun herhangi bir süreç belleğini değiştirmek için kullanılabilir. Ancak, işlevin taşınabilir kullanımı, yalnızca <a href="glibc-Memory-mapped-I-O.html#glibc-fn-mmap"><strong class="function"><code>mmap</code></strong></a> veya <a href="glibc-Memory-mapped-I-O.html#glibc-fn-mmap64"><strong class="function"><code>mmap64</code></strong></a> tarafından döndürülen bellek bölgeleriyle kullanılmasını gerektirir.
  </p>
      </section>
      <footer>
        <div align="center" class="footer">
          <small>Bir <a href="http://belgeler.org.tr/">Linux Kitaplığı</a> Sayfası</small>
        </div>
      </footer>
    </section>
  </body>
</html>
